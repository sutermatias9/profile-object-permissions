<template>
    <div class="slds-var-p-horizontal_medium">
        <div class="header">
            <div class="slds-grid slds-gutters">
                <div class="slds-col">
                    <lightning-combobox label="Object" options={sobjects}
                        onchange={handleObjectChange}></lightning-combobox>
                </div>
                <div class="slds-col">
                    <lightning-combobox label="Profile" options={profiles}
                        onchange={handleProfileChange}></lightning-combobox>
                </div>
                <div class="slds-col">
                    <lightning-button label="Get permissions" variant="brand"
                        onclick={handleGetPermissionsClick}></lightning-button>
                </div>
            </div>
        </div>
        <hr>
        <h2 class="slds-text-heading_medium slds-var-m-vertical_medium">Object Permissions</h2>
        <template lwc:if={objectPermissions}>
            <div class="slds-grid slds-var-m-bottom_large">
                <template for:each={objectPermissions} for:item="permission">
                    <div class="slds-col" key={permission.name}>
                        <lightning-input type="toggle" label={permission.name} checked={permission.value}
                            onchange={handleObjectPermissionChange}></lightning-input>
                    </div>
                </template>
            </div>
        </template>
        <h2 class="slds-text-heading_medium slds-var-m-bottom_medium">Field Permissions</h2>
        <div class="slds-grid slds-var-p-left_medium">
            <div class="slds-col slds-size_10-of-12">
                <template lwc:if={fieldPermissions}>
                    <div class="slds-grid slds-wrap">
                        <template for:each={fieldPermissions} for:item="field">
                            <div class="slds-col slds-size_6-of-12 slds-var-m-bottom_small" key={field.name}>
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_1-of-3">{field.name}:</div>
                                    <div class="slds-col slds-size_1-of-3">
                                        <lightning-input type="toggle" label="Read"
                                            checked={field.permissions.Readable}></lightning-input>
                                    </div>
                                    <div class="slds-col slds-size_1-of-3">
                                        <lightning-input type="toggle" label="Edit"
                                            checked={field.permissions.Editable}></lightning-input>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>
            </div>
        </div>
    </div>
</template>

<!--PEDIR QUE ELIJA UN PROFILE Y UN OBJETO. VER permisos object and field ahi mismo
HAcerlo con save button-->